<script lang="ts">
	import { Accordion, type AccordionItem } from 'melt/builders';
	import { _ } from 'svelte-i18n';
	import { localeStore } from '../i18n.svelte';
	import { slide } from 'svelte/transition';
	import { ChevronDown } from '@lucide/svelte';
	import { type Snippet } from 'svelte';

	type Item = AccordionItem<{
		title: string;
	}>;
	
	const items: Item[] = [
		{ id: '1', title: $_('rsvp.accordion.dress_code') },
		{ id: '2', title: $_('rsvp.accordion.the_menu') }
	];

	const accordion = new Accordion({
		multiple: true
	});

	const dressCodeItem = accordion.getItem(items[0]);
	const menuItem = accordion.getItem(items[1]);
</script>

{#snippet accordionItem(item: ReturnType<Accordion['getItem']>, content: Snippet)}
	<div class="item">
		<div {...item.heading} class="heading">
			<button {...item.trigger} class="trigger {localeStore.locale}">
				{item.item.title}
			</button>
			<div class="chevron-down-container {localeStore.locale}" class:rotate={item.isExpanded}>
				<ChevronDown strokeWidth={1.25} />
			</div>
		</div>

		{#if item.isExpanded}
			<div
				{...item.content}
				class="content {localeStore.locale}"
				transition:slide={{ duration: 350 }}
			>
				{@render content()}
			</div>
		{/if}
	</div>
{/snippet}

{#snippet dressCodeContent()}
	<p>Q1.ì²« ë§Œë‚¨</p>
	<p>ğŸ™ì§€ì•„ : ê°™ì€ êµìœ¡ í”„ë¡œê·¸ë¨ì„ ì´ìˆ˜í•˜ê³ , ë„ì¿„ì—ì„œ ì¼í•˜ê³  ìˆëŠ” ì‚¬ëŒë“¤ì´ ëª¨ì¸ ì‹ì‚¬ ìë¦¬ì—ì„œ ì²˜ìŒ ë§Œë‚¬ìŠµë‹ˆë‹¤. ì²«ì¸ìƒì€ ë§¥ì£¼ë¥¼ ë¬¼ì²˜ëŸ¼ ë§ˆì‹œëŠ” ì‚¬ëŒ...â˜… ê°œì¸ì ìœ¼ë¡œ ì´ì•¼ê¸°ë¥¼ ë‚˜ëˆ„ê²Œ ëœê±´ ê·¸ë¡œë¶€í„° 1ë…„ ë’¤ì˜€ìŠµë‹ˆë‹¤. </p>
	<br>
	<p>Q2.ê²°í˜¼ì„ ê²°ì‹¬í•˜ê²Œ ëœ ê³„ê¸°ëŠ”?</p>
	<p>âš¡ì›ì§„ : ê·€ì—¬ìš´ ê²ƒì€ í‰ìƒ ê°„ë‹¤ê³  ìƒê°í•˜ëŠ”ë°, ì‹ ë¶€ëŠ” ì •ë§ ê·€ì—½ë‹¤. ë¹ˆë§ì´ ì•„ë‹ˆê³  ê·€ì—¬ìš´ ê²ƒì´ ìµœê³ . ê·¸ë¦¬ê³  í•­ìƒ ë‚˜ë¥¼ ì‚¬ë‘í•´ì£¼ëŠ” ê²ƒì´ ëª¨ë“  ìƒí™©ì—ì„œ ëŠê»´ì§€ê¸° ë•Œë¬¸ì— í‰ìƒì„ ê°™ì´í•˜ê³  ì‹¶ë‹¤.</p>
	<p>ğŸ™ì§€ì•„ : íŠ¹ë³„í•œ ê³„ê¸°ëŠ” ì—†ì—ˆìŠµë‹ˆë‹¤. íŠ¹ë³„í•˜ì§€ ì•Šì€ ë§¤ì¼ë„, ë³„ê±° ì•„ë‹Œ ì´ì•¼ê¸°ë„ ì–¸ì œë‚˜ ë‚˜ëˆŒ ìˆ˜ ìˆëŠ” ì‚¬ëŒì´ë¼ í‰ìƒ í•¨ê»˜ í•˜ê³ ì‹¶ë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.</p>
	<br>
	<p>Q3.ê²°í˜¼ í›„ ë°”ë¼ëŠ” ì </p>
	<p>âš¡ì›ì§„ : ì•„ë¬´ìª¼ë¡ ê±´ê°•í–ˆìœ¼ë©´ ì¢‹ê² ê³ , í•¨ê»˜í•˜ëŠ” ëª¨ë“  ì‹œê°„ì´ í–‰ë³µê³¼ ê¸ì •ì´ ê°€ë“í•œ ì‚¶ì´ ë˜ê¸°ë¥¼ ë°”ëë‹ˆë‹¤.</p>
	<p>ğŸ™ì§€ì•„ : ì§€ê¸ˆì²˜ëŸ¼ë§Œ ì§€ë‚´ê³  ì‹¶ë‹¤? ê°ì í• ì¼ì— ìµœì„ ì„ ë‹¤í•˜ê³  í•¨ê»˜ í•˜ë£¨ë¥¼ ë§ˆë¬´ë¦¬ í•˜ëŠ” ë§¤ì¼ì„ ê°€ëŠ¥í•œ ì˜¤~ë˜ ì§€ì†í•  ìˆ˜ ìˆì—ˆìœ¼ë©´ í•©ë‹ˆë‹¤. (ìµœì†Œ 35ë…„)</p>
	<br>
	<p>Q4.ì‹ ë¶€ê°€ í˜ë“¤ ë•Œ ë‚´ê°€ ê¼­ í•´ì¤„ í•œ ê°€ì§€ëŠ”?</p>
	<p>âš¡ì›ì§„ : ì£¼ë§ì— ëŠ¦ì  ìë©´ ê·¸ëƒ¥ ê¹¨ìš°ì§€ ì•Šê³  ë§›ìˆëŠ” ìŒì‹ ëƒ„ìƒˆë¡œ ê¹¨ì›Œì„œ ë°”ë¡œ ë©•ì´ëŠ” ê²ƒ.</p>
	<p>ğŸ™ì§€ì•„ : ì˜¤ëŠ˜ë„ ë”ë¸”ì¹˜ì¦ˆë²„ê±° ëƒ„ìƒˆë¥¼ ë§¡ìœ¼ë©° ì¼ì–´ë‚¬ìŠµë‹ˆë‹¤.</p>
	<br>
	<p>Q5.ì‹ í˜¼ ì—¬í–‰ì€?</p>
	<p>ğŸƒâ€â™‚ï¸ğŸƒâ€â™€ï¸ : íŒŒë¦¬ 10km ë§ˆë¼í†¤ì„ ì‹ ì²­í•˜ì˜€ìŠµë‹ˆë‹¤~! ì‹ ë‚˜ê²Œ ë›°ê³ ì˜¬ê²Œìš” :)</p>
{/snippet}

{#snippet menuContent()}
	<p class="menu-title">{$_('rsvp.accordion.menu_title')}</p>
	<p class="beef">{$_('rsvp.accordion.beef')}</p>
	<p>&</p>
	<p class="fish">{$_('rsvp.accordion.fish')}</p>
	<p class="vegetarian">
		{$_('rsvp.accordion.vegetarian')}
	</p>
{/snippet}

<div class="accordion-root" {...accordion.root}>
	{@render accordionItem(dressCodeItem, dressCodeContent)}
	
</div>

<style lang="scss">
	.accordion-root {
		width: 100%;
	}

	.item {
		margin-bottom: 1em;
	}

	.heading {
		border-top: 1px solid $primary-color-light;
		position: relative;
	}

	button.trigger {
		color: $primary-color;
		width: 100%;

		&.en {
			letter-spacing: 1px;
			font-weight: 600;
			font-size: 1.3rem;
			padding: 0.6em 0;
		}

		&.kr {
			letter-spacing: 1px;
			font-weight: 500;
			font-size: 1.1rem;
			padding: 0.8em 0;
		}
	}

	.chevron-down-container {
		position: absolute;
		width: 1.5em;
		height: 1.5em;
		right: 0.6em;
		color: $primary-color;
		transition: transform 350ms ease;

		&.en {
			top: 1.05em;
		}

		&.kr {
			top: 0.9em;
		}

		&.rotate {
			transform: rotate(180deg);
		}
	}

	.content {
		display: flex;
		flex-direction: column;
		align-items: center;
		padding: 0.5em 0.5em 1em 0.5em;

		p {
			text-align: center;
		}

		&.en p {
			font-size: 1.1rem;

			&.semi-formal {
				margin-bottom: 0.5em;
			}

			&.menu-title {
				margin-bottom: 1em;
			}

			&.beef,
			&.fish {
				font-weight: 700;
			}

			&.vegetarian {
				margin-top: 1em;
			}
		}

		&.kr p {
			font-size: 0.9rem;

			&:not(:last-child) {
				margin-bottom: 0.5em;
			}

			&.semi-formal,
			&.menu-title {
				margin-bottom: 1.5em;
			}

			&.beef,
			&.fish {
				font-weight: 600;
			}

			&.vegetarian {
				margin-top: 1.5em;
			}
		}
	}
</style>
